{% extends 'base.html' %}
{% load form_extras %}
{% block title %}Profile{% endblock %}
{% block content %}
<h1 class="text-3xl font-semibold mb-6">Profile & Settings</h1>
<div class="grid md:grid-cols-2 gap-6">
  <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow">
    <h2 class="font-semibold mb-4">Profile Info</h2>
    <form method="post">{% csrf_token %}
      <input type="hidden" name="update" value="profile">
      <label class="block text-sm mb-1">Name</label>
      <input name="name" value="{{ full_name }}" class="w-full px-3 py-2 border rounded dark:bg-slate-700 dark:border-slate-600" />
      <label class="block text-sm mt-4 mb-1">Email</label>
      <input value="{{ user.email }}" disabled class="w-full px-3 py-2 border rounded bg-slate-100 dark:bg-slate-700 dark:border-slate-600" />
      <button class="mt-4 px-4 py-2 bg-primary text-white rounded">Save</button>
    </form>
    <p class="text-sm mt-4">Password change: <a class="text-primary" href="/accounts/password_change/">Change Password</a></p>
  </div>
  <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow">
    <h2 class="font-semibold mb-4">Preferences</h2>
    <form method="post">{% csrf_token %}
      <label class="block text-sm mb-1">Theme</label>
      <select name="theme" class="w-full px-3 py-2 border rounded dark:bg-slate-700 dark:border-slate-600">
        <option value="light" {% if theme == 'light' %}selected{% endif %}>Light</option>
        <option value="dark" {% if theme == 'dark' %}selected{% endif %}>Dark</option>
      </select>
      <button class="mt-4 px-4 py-2 bg-primary text-white rounded">Update Theme</button>
    </form>
  </div>
  <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow md:col-span-2">
    <h2 class="font-semibold mb-4">Categories</h2>
    <form method="post" class="flex flex-col sm:flex-row gap-3 mb-4">{% csrf_token %}
      <input type="text" name="new_category" placeholder="New category name" class="flex-1 form-control" />
      <button class="px-4 py-2 bg-primary text-white rounded shadow hover:bg-blue-600">Add</button>
    </form>
    <div class="flex flex-wrap gap-2">
      {% for cat in user_categories %}
        <span class="px-3 py-1 rounded-full bg-slate-200 dark:bg-slate-700 text-xs font-medium">{{ cat.name }}</span>
      {% empty %}
        <span class="text-slate-500 text-sm">No custom categories yet.</span>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
