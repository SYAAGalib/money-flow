{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<h1 class="text-3xl font-semibold mb-6">Hello, {{ user.first_name|default:user.username }} ðŸ‘‹</h1>
<div class="grid md:grid-cols-3 gap-6 mb-8">
  <div class="p-5 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow flex flex-col gap-1">
    <h3 class="text-xs uppercase tracking-wide font-semibold opacity-80">Total Income</h3>
    <p class="text-3xl font-bold">{{ total_income|floatformat:2 }}</p>
  </div>
  <div class="p-5 rounded-xl bg-gradient-to-br from-rose-500 to-red-600 text-white shadow flex flex-col gap-1">
    <h3 class="text-xs uppercase tracking-wide font-semibold opacity-80">Total Expenses</h3>
    <p class="text-3xl font-bold">{{ total_expense|floatformat:2 }}</p>
  </div>
  <div class="p-5 rounded-xl bg-gradient-to-br from-indigo-500 to-blue-600 text-white shadow flex flex-col gap-1">
    <h3 class="text-xs uppercase tracking-wide font-semibold opacity-80">Balance</h3>
    <p class="text-3xl font-bold">{{ balance|floatformat:2 }}</p>
  </div>
</div>
<div class="flex space-x-4 mb-6">
  <a href="/transactions/add/?type=income" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">Add Income</a>
  <a href="/transactions/add/?type=expense" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Add Expense</a>
</div>
<div class="bg-white dark:bg-slate-800 rounded-xl shadow overflow-hidden">
  <div class="p-4 border-b dark:border-slate-700 flex justify-between items-center"><h2 class="font-semibold flex items-center gap-2">Recent Transactions</h2><a href="/transactions/" class="text-sm text-primary">View All</a></div>
  <table class="w-full text-sm">
    <thead><tr class="bg-slate-100 dark:bg-slate-700 text-left"><th class="p-2">Date</th><th class="p-2">Type</th><th class="p-2">Category</th><th class="p-2">Amount</th><th class="p-2">Notes</th></tr></thead>
    <tbody>
      {% for t in recent_transactions %}
      <tr class="border-t dark:border-slate-700">
        <td class="p-2">{{ t.date }}</td>
        <td class="p-2">{{ t.get_type_display }}</td>
        <td class="p-2">{{ t.category }}</td>
        <td class="p-2 font-medium {% if t.type == 'income' %}text-green-600{% else %}text-red-600{% endif %}">{{ t.amount }}</td>
        <td class="p-2">{{ t.notes|default:'-' }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="5" class="p-4 text-center text-slate-500">No transactions yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
